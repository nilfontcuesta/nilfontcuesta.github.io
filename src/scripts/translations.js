const translations = {
    en: {
        "welcome-title": "> Welcome!",
        "welcome-second": "I'm Nil Font i Cuesta",
        "welcome-third": "A Software Engineer who loves â˜•â€‹â›µðŸ”ï¸",
        "welcome-menu-resume": "About me",
        "welcome-menu-linkedin": "LinkedIn",
        "resume-name": "Nil Font i Cuesta",
        "resume-first-subtitle": "> Software Engineer:",
        "resume-second-subtitle": "8 years of experience",
        "resume-download-pdf": "Download PDF",
        "resume-presentation-hello": "> Hey there, I'm Nil! ðŸ‘‹",
        "resume-presentation-professional": "A Computer Engineer graduated from UPC, specialized in Software Engineering, with over 8 years of experience in the field. As a backend engineer, I'm passionate about software architecture and its ability to solve complex problems efficiently. Currently, I'm expanding my expertise by pursuing a Master's in Cybersecurity and Privacy at the UOC.",
        "resume-presentation-personal": "On a personal level, I consider myself ambitious and highly motivated to keep learning and growing both professionally and personally. I deeply value teamwork, transparency, and constructive feedback. I enjoy sharing knowledge and am always open to new challenges and opportunities to grow.",
        "resume-subtitle-experience": "Main Experience",
        "wallapop-title": "Wallapop (Mar 2022 - Present)",
        "wallapop-description": " is a leading online platform for buying and selling second-hand products between individuals, with over 15 million active users per month. As a member of the Platform-Core team, my role is to develop and deliver new tools and services that are utilized across the entire platform.",
        "ajuntament-title": "Barcelona City Council (May 2019 - Sep 2023)",
        "ajuntament-description": "Public office in Barcelona City Council during the 2019-2023 mandate. (Half-time job)",
        "ajuntament-spokesperson": "Councilior Spockperson of District",
        "ajuntament-councilior": "Councilior of District",
        "omatech-title": "Omatech (Apr 2019 - Mar 2022)",
        "omatech-description": " is a digital development company that specializes in creating custom technical solutions for businesses",
        "farmavet-title": "Farmavet (Jul 2018 - Feb 2019)",
        "farmavet-description": " is a digital development company that specializes in creating custom technical solutions for health and pharmacy businesses",
        "bcnquark-title": "BCN Quark (Jul 2017 - Feb 2019)",
        "bcnquark-description": " is a technology company dedicated to the development software.",
        "resume-subtitle-education": "Education",
        "education-master-uoc-title": "Master in Cybersecurity and Privacy",
        "education-master-uoc-description": "Master in  Cybersecurity  and  Privacy.  The  core  focus  of  this program  includes  penetration  testing,  ethical  hacking, cryptography,  cybersecurity  management,  and  data  privacy  lawsand standards.",
        "education-degree-upc-title": "Computer Engineering",
        "education-degree-upc-description": "Degree  in  Computer  Engineering  with  a  specialization  inSoftware Engineering.",
        "resume-subtitle-skills": "Skills",
        "skills-languages-title": "Languages",
        "skills-languages-description": "Catalan (native), Spanish (native), English (Professional working proficiency - B2 Equivalent)",
        "skills-programming-title": "Programming Languages",
        "skills-programming-description": "Kotlin, Java, Python, Go, PHP, TypeScript, JavaScript, C, C++",
        "skills-frameworks-title": "Frameworks/Libraries",
        "skills-frameworks-description": "Ktor, SpringBoot, Django, Laravel, FastAPI, React, AngularJS",
        "skills-technologies-title": "Other Technologies",
        "skills-technologies-description": "AWS (ECS, DynamoDB, RDS, Cloud Formation...), Grafana, InfluxDB, Kafka, RabbitMQ",
        "resume-subtitle-miscellaneous": "Miscellaneous",
        "miscellaneous-cybersecurity": "Cybersecurity introduction course - UPC Jedi Junior",
        "miscellaneous-machinelearning": "Machine Learning introduction course - UPC Jedi Junior",
        "miscellaneous-barcelonaqbit": "Founder Member of",
        "miscellaneous-hpcodewars": "3rd position in HP Code Wars Barcelona 2015.",
        "footer-legal": "Legal warning",
        "footer-cookies": "Privacy cookies",
        "legal-back": "Back",
        "legal-last-update": "Last Update"
    },
    es: {
        "welcome-title": "> Bienvenido/a!",
        "welcome-second": "Soy Nil Font Cuesta",
        "welcome-third": "Un Ingeniero del Software apasionado del â˜•â€‹â›µðŸ”ï¸",
        "welcome-menu-resume": "Sobre mi",
        "welcome-menu-linkedin": "LinkedIn",
        "resume-name": "Nil Font Cuesta",
        "resume-first-subtitle": "> Ingeniero del Software:",
        "resume-second-subtitle": "con mÃ¡s de 8 aÃ±os de experiencia",
        "resume-download-pdf": "Descargar PDF",
        "resume-presentation-hello": "> Hola, soy Nil! ðŸ‘‹",
        "resume-presentation-professional": "Ingeniero InformÃ¡tico graduado por la UPC, especializado en IngenierÃ­a del Software, con mÃ¡s de 8 aÃ±os de experiencia en el sector. Como ingeniero backend, me apasiona la arquitectura del software, diseÃ±ar y pensar soluciones a nuevos retos. Actualmente, estoy ampliando mis conocimientos con un mÃ¡ster en Ciberseguridad y Privacidad en la UOC.",
        "resume-presentation-personal": "A nivel personal, me considero una persona ambiciosa y muy motivada para seguir aprendiendo y evolucionando tanto a nivel profesional como personal. Valoro profundamente el trabajo en equipo, la transparencia y el feedback constructivo. Me encanta compartir conocimientos y siempre estoy abierto a nuevos retos y oportunidades para crecer.",
        "resume-subtitle-experience": "Experiencia",
        "wallapop-title": "Wallapop (Mar 2022 - Presente)",
        "wallapop-description": " es una plataforma online para comprar y vender porductos de segunda mano entre particulares con unos 15 millones de usuarios activos al mes. Como miembro del equipo de Platform-Core, mi tarea es diseÃ±ar y desarrollar nuevas herramientas y servicios que afecten a varias arias de la plataforma.",
        "ajuntament-title": "Ayuntamiento de Barcelona (Mayo 2019 - Set 2023)",
        "ajuntament-description": "Cargo pÃºblico en el Ayuntamiento de Barcelona durante el mandato 2019-2023. (Media jornada)",
        "ajuntament-spokesperson": "Consejero Portavoz de Distrito",
        "ajuntament-councilior": "Consejero de Distrito",
        "omatech-title": "Omatech (Abr 2019 - Mar 2022)",
        "omatech-description": " es empresa de desarrollo digital especializada en crear soluciones tÃ©cnicas personalizadas (web, apps...) para empresas.",
        "farmavet-title": "Farmavet (Jul 2018 - Feb 2019)",
        "farmavet-description": " es una consultora tecnolÃ³gica especializada en proporcionar soluciones a empresas del sector sanitÃ¡rio y farmacÃ©utico.",
        "bcnquark-title": "BCN Quark (Jul 2017 - Feb 2019)",
        "bcnquark-description": " es una empresa tecnolÃ³gica con varios productos propios.",
        "resume-subtitle-education": "EducaciÃ³n",
        "education-master-uoc-title": "MÃ¡ster en Ciberseguridad y Privacidad",
        "education-master-uoc-description": "Los principales objetivos de este mÃ¡ster son la capacidad de gestiÃ³n de la ciberseguridad de una entidad, el pentesting (test de penetraciÃ³n), el hacking Ã©tico, la criptografÃ­a y los estÃ¡ndares legales de privacidad.",
        "education-degree-upc-title": "IngenierÃ­a InformÃ¡tica",
        "education-degree-upc-description": "Grado de IngenierÃ­a InformÃ¡tica cursando la especializaciÃ³n de IngenierÃ­a del Software",
        "resume-subtitle-skills": "Habilidades",
        "skills-languages-title": "Idiomas",
        "skills-languages-description": "CatalÃ¡n (nativo), EspaÃ±ol (nativo), InglÃ©s (Competencia laboral profesional)",
        "skills-programming-title": "Lenguajes de ProgramaciÃ³n",
        "skills-programming-description": "Kotlin, Java, Python, Go, PHP, TypeScript, JavaScript, C, C++",
        "skills-frameworks-title": "Frameworks/Libraries",
        "skills-frameworks-description": "Ktor, SpringBoot, Django, Laravel, FastAPI, React, AngularJS",
        "skills-technologies-title": "Otras tecnologÃ­as",
        "skills-technologies-description": "AWS (ECS, DynamoDB, RDS, Cloud Formation...), Grafana, InfluxDB, Kafka, RabbitMQ",
        "resume-subtitle-miscellaneous": "Otros",
        "miscellaneous-cybersecurity": "Curso de introducciÃ³n a la Ciberseguretat - UPC Jedi Junior",
        "miscellaneous-machinelearning": "Curso de introducciÃ³n al Machine Learning - UPC Jedi Junior",
        "miscellaneous-barcelonaqbit": "Miembro fundador de",
        "miscellaneous-hpcodewars": "3ra posiciÃ³n en HP Code Wars Barcelona 2015.",
        "footer-legal": "Aviso legal",
        "footer-cookies": "PolÃ­tica de cookies",
        "legal-back": "AtrÃ¡s",
        "legal-last-update": "Ãšltima actualizaciÃ³n"
    },
    ca: {
        "welcome-title": "> Benvingut/da!",
        "welcome-second": "Em dic Nil Font i Cuesta",
        "welcome-third": "SÃ³c un Enginyer del Software apassionat del â˜•â€‹â›µðŸ”ï¸",
        "welcome-menu-resume": "Sobre mi",
        "welcome-menu-linkedin": "LinkedIn",
        "resume-name": "Nil Font i Cuesta",
        "resume-first-subtitle": "> Enginyer del Software:",
        "resume-second-subtitle": "amb mÃ©s de 8 anys d'experiÃ¨ncia",
        "resume-download-pdf": "Descarregar PDF",
        "resume-presentation-hello": "> Hola, em dic Nil! ðŸ‘‹",
        "resume-presentation-professional": "SÃ³c Enginyer InformÃ tic graduat per la UPC, especialitzat en Enginyeria del Software, amb mÃ©s de 8 anys d'experiÃ¨ncia en el sector. Com a enginyer backend, em fascina l'arquitectura del software i poder dissenyar i pensar solucions a nous reptes. Actualment, estic ampliant els meus coneixements amb un mÃ ster en Ciberseguretat i Privadesa a la UOC.",
        "resume-presentation-personal": "A nivell personal, em defineixo com una persona ambiciosa i amb una gran motivaciÃ³ per continuar aprenent i evolucionant tant a nivell professional com personal. Valoro profundament el treball en equip, la transparÃ¨ncia, i el valor del feedback constructiu. M'agrada compartir coneixements i sempre estic obert a nous reptes i oportunitats per crÃ©ixer.",
        "resume-subtitle-experience": "ExperiÃ¨ncia",
        "wallapop-title": "Wallapop (Mar 2022 - Present)",
        "wallapop-description": " Ã©s una plataforma online per comprar i vendre productes de segona mÃ  entre particulars amb uns 15 milions d'usuaris actius al mes. Com a membre de l'equip de Platform-Core, la meva tasca Ã©s dissenyar i desenvolupar noves eines i serveis que afecten a diverses arees de la plataforma.",
        "ajuntament-title": "Ajuntament de Barcelona (Maig 2019 - Sep 2023)",
        "ajuntament-description": "CÃ rrec pÃºblic a l'Ajuntament de Barcelona durant el mandat 2019-2023. (Mitja jornada)",
        "ajuntament-spokesperson": "Conseller Portaveu de Districte",
        "ajuntament-councilior": "Conseller de Districte",
        "omatech-title": "Omatech (Abr 2019 - Mar 2022)",
        "omatech-description": " Ã©s una empresa de desenvolupament digital especialitzada en crear solucions tÃ¨cniques personalitzades per a empreses (web, apps etc.)",
        "farmavet-title": "Farmavet (Jul 2018 - Feb 2019)",
        "farmavet-description": " Ã©s una consultora tecnolÃ²gica especialitzada en proporcionar solucions a empreses del sector sanitari i farmacÃ¨utic.",
        "bcnquark-title": "BCN Quark (Jul 2017 - Feb 2019)",
        "bcnquark-description": " Ã©s  empresa tecnolÃ²gica amb diversos productes propis",
        "resume-subtitle-education": "EducaciÃ³",
        "education-master-uoc-title": "MÃ ster en Ciberseguretat i Privadesa",
        "education-master-uoc-description": "Els principals objectius d'aquest mÃ ster sÃ³n la capacitat de gestionar la ciberseguretat d'entitats, el pentesting (test de penetraciÃ³), el hacking Ã¨tic, la criptografia i els estandards legals de privacitat.",
        "education-degree-upc-title": "Enginyeria InformÃ tica",
        "education-degree-upc-description": "Grau en Enginyeria InformÃ tica cursant l'especialitzaciÃ³ d'Enginyeria del Software.",
        "resume-subtitle-skills": "Habilitats",
        "skills-languages-title": "Idiomes",
        "skills-languages-description": "CatalÃ  (natiu), CastellÃ  (natiu), AnglÃ¨s (CompetÃ¨ncia laboral professional)",
        "skills-programming-title": "Llenguatges de programaciÃ³",
        "skills-programming-description": "Kotlin, Java, Python, Go, PHP, TypeScript, JavaScript, C, C++",
        "skills-frameworks-title": "Frameworks/Llibreries",
        "skills-frameworks-description": "Ktor, SpringBoot, Django, Laravel, FastAPI, React, AngularJS",
        "skills-technologies-title": "Altres tecnologies",
        "skills-technologies-description": "AWS (ECS, DynamoDB, RDS, Cloud Formation...), Grafana, InfluxDB, Kafka, RabbitMQ",
        "resume-subtitle-miscellaneous": "Altres",
        "miscellaneous-cybersecurity": "Curs d'introducciÃ³ a la Ciberseguretat - UPC Jedi Junior",
        "miscellaneous-machinelearning": "Curs d'IntroducciÃ³ al Machine Learning - UPC Jedi Junior",
        "miscellaneous-barcelonaqbit": "Membre fundador de",
        "miscellaneous-hpcodewars": "3ra posiciÃ³ en l'HP Code Wars Barcelona 2015.",
        "footer-legal": "AvÃ­s legal",
        "footer-cookies": "PolÃ­tica de cookies",
        "legal-back": "Enrera",
        "legal-last-update": "Ãšltima actualitzaciÃ³"
    }
};

let currentLanguage = 'en';

export function updateContent() {
    const languageTranslations = translations[currentLanguage];

    if (languageTranslations) {
        const elements = document.querySelectorAll('[data-i18n]');
        elements.forEach((element) => {
            const key = element.getAttribute('data-i18n');
            element.textContent = languageTranslations[key] || key;
        });

        const dynamicLinks = document.querySelectorAll('.dynamic-link');
        dynamicLinks.forEach((link) => {
            const basePath = link.getAttribute('data-path');
            if (basePath) {
                link.setAttribute('href', `/${currentLanguage}${basePath}`);
            }
        });
    }
}

function changeLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('language', lang);
    document.getElementById('selected-language').textContent = `${lang.toUpperCase()}`;
    updateContent();
}

export function translate(key) {
    var result = translations[currentLanguage][key]
    return result ? result : key;
}

function detectLanguage() {
    let language = localStorage.getItem('language');

    if (!language) {
        const browserLang = navigator.language.slice(0, 2);
        language = ['en', 'es', 'ca'].includes(browserLang) ? browserLang : 'en';
    }

    currentLanguage = language;
    document.getElementById('selected-language').textContent = `${language.toUpperCase()}`;
}

detectLanguage();

// LANGUAGE SELECTOR //

const languageSelect = document.querySelector('.language-select');
const dropdown = document.getElementById('dropdown');
const selectedLanguage = document.getElementById('selected-language');

selectedLanguage.addEventListener('click', () => {
    languageSelect.classList.toggle('open');
});

document.querySelectorAll('.dropdown-item').forEach(item => {
    item.addEventListener('click', (event) => {
        const lang = event.target.getAttribute('data-lang');
        changeLanguage(lang);
        languageSelect.classList.remove('open');
    });
});
